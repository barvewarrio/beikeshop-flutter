## 1. 切换到 Java 17（当前终端）

export JAVA_HOME=$(/usr/libexec/java_home -v 17)
export PATH="$JAVA_HOME/bin:$PATH"
java -version  # 确认为 17，而不是 1.8

## 2. 连接安卓真机（无线调试）

### 2.1 第一次配对（在手机“无线调试 → 通过配对码配对设备”弹窗中获取信息）

# 手机弹框显示示例：
# IP 地址和配对端口：192.168.0.102:44793
# 配对码：534597

adb pair 192.168.0.102:44793
# 看到 Enter pairing code: 后输入 6 位配对码
534597

### 2.2 之后连接（使用“已配对设备”里的 IP:端口）

# 在手机“无线调试 → 已配对设备”中查看当前 IP:端口，例如：
# 192.168.0.102:38427

adb connect 192.168.0.102:38427
adb devices  # 检查设备已显示为 device

## 3. 进入项目目录

cd /Volumes/macbak/codeaiapp/12-focuspomodoro-timer

## 4. 真机无线联调命令

### 4.1 Debug 模式（推荐用于抓日志、热重载）

cd beikeshop-flutter

export JAVA_HOME=$(/usr/libexec/java_home -v 17)
export PATH="$JAVA_HOME/bin:$PATH"

flutter run -d V2241A \
  --dart-define=ADMOB_BANNER_ID_ANDROID=ca-app-pub-xxx/yyy

### 4.2 Profile 模式（接近 Release 性能）

flutter run -d V2241A \
  --profile \
  --dart-define=ADMOB_BANNER_ID_ANDROID=ca-app-pub-xxx/yyy

export JAVA_HOM
E=$(/usr/libexec/java_home -v 17) && flutter run -d V2241A --profile --dart-define=ADM
OB_BANNER_ID_ANDROID=ca-app-pub-xxx/yyy

## 5. 打包 Release APK（本地构建发布包）

flutter build apk --release \
  --no-tree-shake-icons \
  --dart-define=ADMOB_BANNER_ID_ANDROID=ca-app-pub-xxx/yyy

# 打包产物路径
# build/app/outputs/flutter-apk/app-release.apk

## 6. 将 Release 包安装到真机

adb install -r build/app/outputs/flutter-apk/app-release.apk
